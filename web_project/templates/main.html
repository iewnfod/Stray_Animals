<!DOCTYPE html>
<html lang="ch">
    <head>
        <!--编码-->
        <meta charset="UTF-8">
        <!--标题-->
        <title>首页</title>
        <!--图标-->
        <link rel="shortcut icon" href="Images/icon.jpeg">
        <!--预加载js support文件-->
        <script src="js/support.js"></script>
        <!--style-->
        <style>
            button {
                cursor: pointer;
            }
            .menubar {
                margin: 10px;
                display: flex;
                flex-direction: row;
                flex-grow: 1;
                height: 50px;
                align-items: center;
                background-color: white;
            }
            .menubarItem {
                background-color: transparent;
                color: black;
                padding: 10px;
                font-size: 20px;
                display: flex;
                flex-direction: row;
                align-items: center;
                justify-items: center;
                cursor: pointer;
                border-radius: 10px;
            }
            .menubarIcon {
                height: 50px;
            }
            .menubarDiv {
                margin-left: 5px;
                margin-right: 5px;
            }
            .sub_menubar_div {
                background-color: #e8e8e8;
                position: absolute;
                z-index: 1;
                display: flex;
                height: 100px;
                margin-top: 0;
                border-bottom-left-radius: 10px;
                border-bottom-right-radius: 10px;
            }
        </style>
        <script>
            var ifSubMenubarDivExist = false

            function removeAllSubItem() {
                var removeclasslist = ['sub_menubar_div']
                for (let removeclassindex = 0; removeclassindex < removeclasslist.length; removeclassindex++) {
                    var el = document.getElementsByClassName(removeclasslist[removeclassindex])
                    for (let i of el) {
                        i.remove()
                    }
                }
                var menubaritems = document.getElementsByClassName('menubarItem')
                for (let i of menubaritems) {
                    i.style.borderBottomRightRadius = '10px'
                    i.style.borderBottomLeftRadius = '10px'
                    i.style.backgroundColor = 'transparent'
                }
                ifSubMenubarDivExist = false
            }

            // 元素名称转变
            var menubar_subdiv_id = {"interview": "interview_subdiv", "shop": "shop_subdiv", "map": "map_subdiv", "help": "help_subdiv"}
            // 创建采访的div以及字元素
            function menubarNewElement(elementid) {
                //如果存在，就去掉，再创建新的
                if (ifSubMenubarDivExist == true) {
                    removeAllSubItem()
                }
                var new_div = document.createElement('div')
                new_div.id = menubar_subdiv_id[elementid]
                new_div.className = "sub_menubar_div"
                new_div.style.width = document.getElementById(elementid).offsetWidth + "px"
                var el = document.getElementById(elementid)
                el.style.borderBottomLeftRadius = '0px'
                el.style.borderBottomRightRadius = '0px'
                el.insertAdjacentElement('afterend', new_div)
                document.getElementById(elementid + "_div").appendChild(new_div)
                document.getElementById(elementid).style.backgroundColor = '#e8e8e8'
                ifSubMenubarDivExist = true
            }

            function menubarRemoveElement(id_) {
                var el = document.getElementById(id_)
                el.remove()
            }

        </script>
    </head>

    <body>
        <!--menubar-->
        <div id="menu_bar" class="menubar">
            <img src="Images/icon.jpeg" style="height: 100%;">
            <span id="mainpage" class="menubarItem" onmouseenter="this.style.backgroundColor = '#e8e8e8'" onmouseout="this.style.backgroundColor = 'transparent'">首页</span>

            <div id="interview_div" class="menubarDiv">
                <span id="interview" class="menubarItem" onmousedown="menubarNewElement(this.id)" onmouseenter="this.style.backgroundColor = '#e8e8e8'" onmouseout="if (document.getElementById(menubar_subdiv_id[this.id]) == null) {this.style.backgroundColor = 'transparent'}">采访</span>
            </div>

            <div id="shop_div" class="menubarDiv">
                <span id="shop" class="menubarItem" onmousedown="menubarNewElement(this.id)" onmouseenter="this.style.backgroundColor = '#e8e8e8'" onmouseout="if (document.getElementById(menubar_subdiv_id[this.id]) == null) {this.style.backgroundColor = 'transparent'}">商城</span>
            </div>

            <div id="map_div" class="menubarDiv">
                <span id="map" class="menubarItem" onmousedown="menubarNewElement(this.id)" onmouseenter="this.style.backgroundColor = '#e8e8e8'" onmouseout="if (document.getElementById(menubar_subdiv_id[this.id]) == null) {this.style.backgroundColor = 'transparent'}">地图</span>
            </div>

            <div id="help_div" class="menubarDiv">
                <span id="help" class="menubarItem" onmousedown="menubarNewElement(this.id)" onmouseenter="this.style.backgroundColor = '#e8e8e8'" onmouseout="if (document.getElementById(menubar_subdiv_id[this.id]) == null) {this.style.backgroundColor = 'transparent'}">领养与帮助</span>
            </div>

            <div id="change_lang_div">
                <button id="change_lang" style="padding: 10px">中/英</button>
            </div>
        </div>
        <!--main container-->
        <div id="main_container" style="display: flex; flex-direction: column">
            <!--
            <div id="upperpart">

                <div id="rowview" style="height: 300px; ">
                    <style>
                        .rowimg {
                            height: 30%;
                            width: 75%;
                            position: absolute;
                            animation-iteration-count: infinite;
                            animation-timing-function: linear;
                            animation-duration: 10s;
                            animation-name: roll;
                            visibility: hidden;
                            border-radius: 10px;
                            border: 1px solid darkgray;
                        }
                        .rowimg img {
                            width: 100%;
                            height: 100%;
                        }
                        @keyframes roll {
                            0% {visibility: unset; left: -800%}
                            40% {left: 10%}
                            75% {left: 10%}
                            100% {visibility: hidden; left: 800%}
                        }
                    </style>

                    <div>
                        <a href="" class="rowimg" style="animation-delay: 0s">
                            <img src="Images/loading.png">
                            1
                        </a>
                        <a href="" class="rowimg" style="animation-delay: 5s">
                            <img src="Images/loading.png">
                            2
                        </a>
                        <a href="" class="rowimg" style="animation-delay: 10s">
                            <img src="Images/loading.png">
                            3
                        </a>
                    </div>
                </div>

            </div>
            -->

            <div id="lowerpart" style="display: flex; flex-direction: row">
                <div id="passage_container"></div>
                <!--我是分割线-->
                <div style="background-color: gainsboro; border: transparent; width: 2px; height: 85vh; margin: 10px"></div>
                <div id="shop_container"></div>
            </div>
        </div>

        <!--一篇文章-->
        <template id="a_passage">
            <style>
                .passage_deceiver {
                    margin: 10px;
                    padding: 10px;
                    background-color: transparent;
                    box-shadow: none;
                    border: 1px solid rgba(0, 0, 0, 0.1);
                    border-radius: 5px;
                }
                .passage_deceiver:hover {
                    box-shadow: 0 1px 6px 0 rgba(0, 0, 0, 0.3);
                    border-color: #eee;
                    transition: all .2s ease-in-out;
                }
            </style>
            <div class="passage_deceiver">
                <a id="passage_a" style="display: flex; flex-direction: row; justify-content: center">
                    <div id="title_container" style="display: flex; flex-direction: column; margin: 10px">
                        <span id="maintitle" style="font-size: 30px">Main_Title</span>
                        <span id="subtitle" style="font-size: 15px">Sub_Title</span>
                    </div>
                    <div id="image_container" style="margin: 10px">
                        <img id="mainimage" style="width: 100px; height: 100px">
                    </div>
                </a>
            </div>
        </template>

        <script>
            //添加一篇文章 函数
            function add_passage(maintitle, subtitle, url, image_url) {
                let t = document.getElementById('a_passage')
                t.content.getElementById('passage_a').setAttribute('href', url)
                t.content.getElementById('mainimage').src = image_url
                t.content.getElementById('maintitle').innerText = maintitle
                t.content.getElementById('subtitle').innerText = subtitle
                let clone = t.content.cloneNode(true)
                document.getElementById('passage_container').appendChild(clone)
            }
            //添加文章
            add_passage('Main Title', 'Sub Title', 'https://mp.weixin.qq.com/s/r3Qmt1Zoc-9I5soBwfJgCA', 'Images/loading.png')
            add_passage('Main Title', 'Sub Title', 'https://mp.weixin.qq.com/s/r3Qmt1Zoc-9I5soBwfJgCA', 'Images/loading.png')

        </script>

        <script>
            //去除所有的东西
            document.getElementById('main_container').addEventListener('click', removeAllSubItem)
        </script>

    </body>

</html>

